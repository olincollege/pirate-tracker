import json


def extract_selected_port_info(jsonfile, outputfile="filtered_output.json"):
    """
    Reads a JSON file containing port data and extracts only selected fields
    for each port entry

    Args:
        jsonfile: Path to the input JSON file
        outputfile: Path to the output file for filtered data 

    Returns:
        A JSON file with simplified port data including country, continent, portname, and top 3 industries
    """
    with open(jsonfile, "r") as f:
        data = json.load(f)

    simplified_data = []
    for port in data.get("features", []):
        attrs = port.get("attributes", {})
        simplified_entry = {
            "country": attrs.get("country"),
            "continent": attrs.get("continent"),
            "portname": attrs.get("portname"),
            "industry_top1": attrs.get("industry_top1"),
            "industry_top2": attrs.get("industry_top2"),
            "industry_top3": attrs.get("industry_top3"),
        }
        simplified_data.append(simplified_entry)

    with open(outputfile, "w") as f_out:
        json.dump(simplified_data, f_out, indent=4)


extract_selected_port_info("Ship_Data.json", "Ship_Data_Filtered.json")
